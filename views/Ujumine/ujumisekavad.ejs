<% layout("layout/boilerplate.ejs") %>
<%- include("../partials/navbarUjumine") %>
<%- include('../partials/flash')  %>

<div class="polygon1u">
    <div class="polygon2u">
        <div class="polygon3u">
        </div>
    </div>
</div>


<h1 id="kav-heading">Ujumise Kavad</h1>
<div class="kav-switch">
    <a id="ükeharj-btn" href="/ukekavad">Üke</a>
    <a id="ujumiseharj-btn" href="/ujumisekavad">Ujumine</a>
</div>


<section class="mb-5 p-0">
    
    <div class="kav-kastid">
        <div class="lisamine">
            <form class="form-control border-add p-4"action="/ujumisekavad/uus" method="POST">
                <div class="row">
                    <label class="m-2 fs-3" for="ni">Lisa kava</label>
                    <div class="col-12 col-lg-6">
                        <input class="my-1 text-dark"type="text" id="ni" name="nimi" placeholder="nimi">
                    </div>
    
                    <div class="col-12 col-lg-6">
                        <input class="my-1"type="number" value=10 placeholder="pingutus (%)" id="percent" name="pingutustase" min='10' step="10" max="100">
                    </div>
    
                    <div class="col-12"><button class="btn btn-success my-2"type="submit">Lisa</button></div>
                </div>
            </form>
        </div>

        <div class="õpetus border-add">
            <ol>
                <li>Loo kava oma nimega</li>
                <li>Vali harjutusi</li>
                <li>Jaga teistega ja vaata ka teiste kavasid</li>
                <li>Keskendu rohkem treeningule</li>
            </ol>
        </div>
        <div class="kav-filter">
            <div class="filtermenu border-add">
                <div class="leftside">
                    <h5>Filter</h5>
                    <form action="/ujumisekavad" method="POST">
        
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="rl" id="flexRadioDefault1" value=-1>
                            <label class="form-check-label" for="flexRadioDefault1">
                              Raskemad
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="rl" id="flexRadioDefault2" value=1>
                            <label class="form-check-label" for="flexRadioDefault2">
                              Lihtsamad
                            </label>
                        </div>
                        <input type="text" id="search" placeholder="Otsi" name="otsing">
                        <button type="submit">Otsi</button>
                    </form>
                </div>
                <div class="rightside">
                    <button id="värvid">Värvidetta</button>
                    <button id="väikevaade">MingiNupp</button>
                    <button id="nupp2">VeelMingiNupp</button>
                </div>
                
            </div>
        </div>
    </div>
    
</section>


<section class="m-0 p-0 p-sm-3">
    <div class="row row-cols-md-2 row-cols-xl-3 g-3 justify-content-md-center" style="margin:0px 20px;">
        <% if(kavad) { %> 
            <% for(kava of kavad) { %>
                <div class="col-12 col-md-6 smcol">
                    <div id="card">
                        <div class="cardtop2">
                            <div id="level2">
                                <span id="number2"><%= kava.pingutustase %>%</span>
                            </div>
                            <div id="head2">
                                <span id="title2"><%= kava.nimi %> </span>
                            </div>
                        </div>
                        <div class="cardbottom2 ">
                            <div class="harjutused2">
                                    <div class="row row-cols-1 ">
                                        <% for(harjutus of kava.harjutused) { %>
                                            <div class="col-12 rida">
                                                <div id="harjutusinujumisekava">
                                                <span class="kordus"><%= harjutus.kordused %> </span> <span class="ala"><%= harjutus.ala %> </span> <span class="eraldus"><%= harjutus.eraldus %></span> <span class="harjutus"><%= harjutus.harjutus %> </span> <span class="vahendid"> (<%= harjutus.vahendid %>) </span> <span class="ajastus"> R-<%= harjutus.ajastus %> </span>
                                                </div>
                                            </div>
                                            <hr>
                                        <% } %>
                                    </div>
                            </div>
                        </div>
                        <div id="cardbuttons2">
                            <a id="lisaHar" href="ujumisekavad/lisaharjutus/<%=kava._id%>">+</a>
                            <a id="uuenda" href="ujumisekavad/update/<%=kava._id%>">Uuenda</a>
                            <a id="kustuta" href="ujumisekavad/deleteOne/<%=kava._id%>">Kustuta</a>
                        </div>
                    </div>
                </div>
            <% } %>
        <% } %> 
    </div>
</section>

<script>

    const harjutused = document.querySelectorAll('#harjutusinujumisekava');
    const butn = document.querySelector('#värvid')
    let on = true;
    butn.addEventListener('click', ()=>{
        if(on){
            butn.innerHTML = 'Värvidega';
            on = !on;
        } else {
            butn.innerHTML = 'Värvidetta';
            on = !on;
        }
        for(harj of harjutused)
        {
            const spans = harj.children;
            for(span of spans){
                span.classList.toggle('wht');
            }
        }
    })
    



</script>