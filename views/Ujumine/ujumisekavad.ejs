<% layout("layout/boilerplate-ujumisekavad.ejs") %>
<%- include("../partials/navbarUjumine") %>
<%- include('../partials/flash') %>

<div class="polygon1u">
    <div class="polygon2u">
        <div class="polygon3u">
        </div>
    </div>
</div>


<h1 id="kav-heading">Ujumise Kavad</h1>
<div class="kav-switch">
    <a id="ükeharj-btn" href="/ukekavad">Üke</a>
    <a id="ujumiseharj-btn" href="/ujumisekavad">Ujumine</a>
</div>
 

<section class="mb-5 p-0">
    
    <div class="kav-kastid">
        <div class="lisamine">
            <form class="form-control border-add p-4"action="/ujumisekavad/uus" method="POST">
                <div class="row">
                    <label class="m-2 fs-3" for="ni">Lisa kava</label>
                    <div class="col-12 col-lg-6">
                        <input class="my-1 text-dark"type="text" id="ni" name="nimi" placeholder="nimi">
                    </div>
    
                    <div class="col-12 col-lg-6">
                        <input class="my-1"type="number" value=10 placeholder="pingutus (%)" id="percent" name="pingutustase" min='10' step="10" max="100">
                    </div>
    
                    <div class="col-12"><button class="btn btn-success my-2"type="submit">Lisa</button></div>
                </div>
            </form>
        </div>

        <div class="õpetus border-add">
            <ol>
                <li>Loo kava oma nimega</li>
                <li>Vali harjutusi</li>
                <li>Jaga teistega ja vaata ka teiste kavasid</li>
                <li>Keskendu rohkem treeningule</li>
            </ol>
        </div>
        <div class="kav-filter">
            <div class="filtermenu border-add">
                <div class="leftside">
                    <h5>Filter</h5>
                    <form action="/ujumisekavad" method="POST">
        
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="rl" id="flexRadioDefault1" value=-1>
                            <label class="form-check-label" for="flexRadioDefault1">
                              Raskemad
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="rl" id="flexRadioDefault2" value=1>
                            <label class="form-check-label" for="flexRadioDefault2">
                              Lihtsamad
                            </label>
                        </div>
                        <input type="text" id="search" placeholder="Otsi" name="otsing">
                        <button type="submit">Otsi</button>
                    </form>
                </div>
                <div class="rightside">
                    <button id="värvid">
                        <svg width="30" height="30" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="11" cy="11" r="11" fill="white"/>
                            <circle cx="11" cy="11" r="10" fill="#535FCB"/>
                            <path d="M21 11C21 9.02219 20.4135 7.08879 19.3147 5.4443C18.2159 3.79981 16.6541 2.51808 14.8268 1.7612C12.9996 1.00433 10.9889 0.806295 9.0491 1.19215C7.10929 1.578 5.32746 2.53041 3.92893 3.92893C2.53041 5.32746 1.578 7.10929 1.19215 9.0491C0.806295 10.9889 1.00433 12.9996 1.7612 14.8268C2.51808 16.6541 3.79981 18.2159 5.4443 19.3147C7.08879 20.4135 9.02219 21 11 21L11 11H21Z" fill="#40D73D"/>
                            <path d="M21 11C21 8.34784 19.9464 5.8043 18.0711 3.92893C16.1957 2.05357 13.6522 1 11 1C8.34784 1 5.8043 2.05357 3.92893 3.92893C2.05357 5.80429 1 8.34783 1 11L11 11H21Z" fill="#E93434"/>
                            <path d="M21 11C21 9.68678 20.7413 8.38642 20.2388 7.17317C19.7362 5.95991 18.9997 4.85752 18.0711 3.92893C17.1425 3.00035 16.0401 2.26375 14.8268 1.7612C13.6136 1.25866 12.3132 1 11 1L11 11H21Z" fill="#EFDA1E"/>
                        </svg>
                    </button>
                    <button id="väikevaade" class="invisibility">
                        <svg width="30" height="30" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect width="10" height="10" rx="1" fill="white"/>
                            <rect x="12" width="10" height="10" rx="1" fill="white"/>
                            <rect x="12" y="12" width="10" height="10" rx="1" fill="white"/>
                            <rect y="12" width="10" height="10" rx="1" fill="white"/>
                        </svg>
                    </button>
                    <button id="väikevaade2" >
                        <svg width="30" height="30" viewBox="0 0 22 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect y="8" width="22" height="5" rx="1" fill="white"/>
                            <rect width="22" height="5" rx="1" fill="white"/>
                            <rect y="16" width="22" height="5" rx="1" fill="white"/>
                        </svg>
                    </button>
                </div>
                
            </div>
        </div>
    </div>
    
</section>


<section id="ujumisekavadbox" class="m-0 p-0 p-sm-3">
    <% if(kavad) { %> 
        <div id="väikeVaade" class="invisibility">
            <% for(kava of kavad) { %>
                    <div class="VäVaade">
                        <div id="pingutus">
                            <%= kava.pingutustase %>
                        </div>
                        <div id="nimi">
                            <%= kava.nimi %>
                        </div>
                        <div class="nuppud">
                            <a href="#">a</a><a href="#">a</a><a href="#">a</a>
                        </div>
                    </div>
            <% } %>
        </div>
    <% } %> 
    <div id="suurVaade" class="ujumisekavad">
        <% if(kavad) { %> 
            <% for(kava of kavad) { %>
                <div id="card2" style="margin: auto;">
                    <div class="cardtop2">
                        <div id="level2">
                            <span id="number2"><%= kava.pingutustase %>%</span>
                        </div>
                        <div id="head2">
                            <span id="title2"><%= kava.nimi %> </span>
                        </div>
                    </div>
                    <div class="cardbottom2 ">
                        <div class="harjutused2">
                                <div class="row row-cols-1 ">
                                    <% if (kava.harjutused.length != 0) { %>
                                        <% for(harjutus of kava.harjutused) { %>
                                            <div class="col-12 rida">
                                                <div id="harjutusinujumisekava">
                                                <span class="kordus"><%= harjutus.kordused %> </span> <span class="ala"><%= harjutus.ala %> </span> <span class="eraldus"><%= harjutus.eraldus %></span> <span class="harjutus"><%= harjutus.harjutus %> </span> <span class="vahendid"> (<%= harjutus.vahendid %>) </span> <span class="ajastus"> R-<%= harjutus.ajastus %> </span>
                                                </div>
                                            </div>
                                            <hr>
                                        <% } %>
                                    <% } else {%>
                                        <DIV id="TÜHJUS">TÜHI KAVA</DIV>
                                    <% } %> 

                                    

                                </div>
                        </div>
                    </div>
                    <div id="cardbuttons2">
                        <a id="button-lisaHar" href="ujumisekavad/lisaharjutus/<%=kava._id%>">
                            <svg width="26" height="26" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="9" width="4" height="22" rx="1" fill="white"/>
                            <rect x="22" y="9" width="4" height="22" rx="1" transform="rotate(90 22 9)" fill="white"/>
                            </svg>
                        </a>
                        <a id="button-uuenda" href="ujumisekavad/update/<%=kava._id%>">
                            <svg width="29" height="29" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0.735745 7.7774C0.331817 7.38932 0.325397 6.74518 0.72151 6.34913L6.35011 0.721401C6.74622 0.325349 7.39036 0.331868 7.77838 0.735855L20.9994 14.5011L14.4989 21.0006L0.735745 7.7774Z" fill="white"/>
                            <path d="M23 23L15.2404 21.3658L21.3646 15.2425L23 23Z" fill="white"/>
                            </svg>
                        </a>
                        <a id="button-kustuta" href="ujumisekavad/deleteOne/<%=kava._id%>">
                            <svg width="26" height="26" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="15.5563" width="4" height="22" rx="1" transform="rotate(45 15.5563 0)" fill="white"/>
                            <rect width="4" height="22" rx="1" transform="matrix(-0.707107 0.707107 0.707107 0.707107 2.82843 0)" fill="white"/>
                            </svg>
                        </a>
                        <a id="button-vaata" href="showcard/<%=kava._id%>/ujumine">
                            <svg id="luup" width="26" height="26" viewBox="0 0 24 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M15.5 17C20.1944 17 24 13.1944 24 8.5C24 3.80557 20.1944 0 15.5 0C10.8056 0 7 3.80557 7 8.5C7 13.1944 10.8056 17 15.5 17ZM15.5 15C19.0898 15 22 12.0898 22 8.5C22 4.91016 19.0898 2 15.5 2C11.9102 2 9 4.91016 9 8.5C9 12.0898 11.9102 15 15.5 15Z" fill="white"/>
                                <path d="M3 23L10 15" stroke="white" stroke-width="3" stroke-linecap="round"/>
                            </svg> 
                        </a>
                        <form action="/save/<%=kava._id%>"method="POST">
                            <button id="button-save" type="submit">
                                <svg width="18" height="25" viewBox="0 0 18 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path id="lips" d="M0 1C0 0.447716 0.447715 0 1 0H8.5H17C17.5523 0 18 0.447715 18 1V19.6552C18 19.8786 17.9252 20.0956 17.7875 20.2715L9.7875 30.4937C9.38713 31.0053 8.61287 31.0053 8.21249 30.4937L0.212495 20.2715C0.0748085 20.0956 0 19.8786 0 19.6552V1Z" fill="white"/>
                                </svg>
                            </button>
                        </form>
                    </div>
                </div>
            <% } %>
        <% } %> 
    </div>
</section>

<script>

    const harjutused = document.querySelectorAll('#harjutusinujumisekava');
    const butn = document.querySelector('#värvid')
    let on = true;
    butn.addEventListener('click', ()=>{
        if(on){
            on = !on;
        } else {
            on = !on;
        }
        for(harj of harjutused)
        {
            const spans = harj.children;
            for(span of spans){
                span.classList.toggle('wht');
            }
        }
    })
    const VäVaNupp1 = document.querySelector('#väikevaade')
    const VäVaNupp2 = document.querySelector('#väikevaade2')
    const kaardid = document.querySelector('#suurVaade')
    const väKaardid = document.querySelector('#väikeVaade')

    VäVaNupp1.addEventListener('click', function(){
        kaardid.classList.toggle('invisibility');
        väKaardid.classList.toggle('invisibility');
        VäVaNupp1.classList.toggle('invisibility')
        VäVaNupp2.classList.toggle('invisibility')
    })
    VäVaNupp2.addEventListener('click', function(){
        kaardid.classList.toggle('invisibility');
        väKaardid.classList.toggle('invisibility');
        VäVaNupp1.classList.toggle('invisibility')
        VäVaNupp2.classList.toggle('invisibility')
    })



</script>