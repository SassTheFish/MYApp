<% layout("layout/boilerplate.ejs") %>
<%- include("../partials/navbarÜke") %>
<%- include('../partials/flash')  %>

<div class="polygon1">
    <div class="polygon2">
        <div class="polygon3">
        </div>
    </div>
</div>


<h1 id="kav-heading">Üke Kavad</h1>
<div class="kav-switch">
    <a id="ükeharj-btn" href="/ukekavad">Üke</a>
    <a id="ujumiseharj-btn" href="/ujumisekavad">Ujumine</a>
</div>


<section class="mb-5">
    
    <div class="kav-kastid">
        <div class="lisamine">
            <form class="form-control border-add p-4"action="/ukekavad/uus" method="POST">
                <div class="row">
                    <label class="m-2 fs-3" for="ni">Lisa kava</label>
                    <div class="col-12 col-lg-6">
                        <input class="my-1 text-dark"type="text" id="ni" name="nimi" placeholder="nimi">
                    </div>
    
                    <div class="col-12 col-lg-6">
                        <input class="my-1"type="number" value=10 placeholder="pingutus (%)" id="percent" name="pingutustase" min='10' step="10" max="100">
                    </div>
    
                    <div class="col-12"><button class="btn btn-success my-2"type="submit">Lisa</button></div>
                </div>
            </form>
        </div>

        <div class="õpetus border-add">
            <ol>
                <li>Loo kava oma nimega</li>
                <li>Vali harjutusi</li>
                <li>Jaga teistega ja vaata ka teiste kavasid</li>
                <li>Keskendu rohkem treeningule</li>
            </ol>
        </div>
        <div class="kav-filter">
            <div class="filtermenu border-add">
                <div class="leftside">
                    <h5>Filter</h5>
                    <form action="/ukekavad" method="POST">
        
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="rl" id="flexRadioDefault1" value=-1>
                            <label class="form-check-label" for="flexRadioDefault1">
                              Raskemad
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="rl" id="flexRadioDefault2" value=1>
                            <label class="form-check-label" for="flexRadioDefault2">
                              Lihtsamad
                            </label>
                        </div>
                        <input type="text" id="search" placeholder="Otsi" name="otsing">
                        <button type="submit">Otsi</button>
                    </form>
                </div>
                <div class="rightside">
                    <button id="väikevaade" class="invisibility">
                        <svg width="30" height="30" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect width="10" height="10" rx="1" fill="white"/>
                            <rect x="12" width="10" height="10" rx="1" fill="white"/>
                            <rect x="12" y="12" width="10" height="10" rx="1" fill="white"/>
                            <rect y="12" width="10" height="10" rx="1" fill="white"/>
                        </svg>
                    </button>
                    <button id="väikevaade2" >
                        <svg width="30" height="30" viewBox="0 0 22 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect y="8" width="22" height="5" rx="1" fill="white"/>
                            <rect width="22" height="5" rx="1" fill="white"/>
                            <rect y="16" width="22" height="5" rx="1" fill="white"/>
                        </svg>
                    </button>
                </div>
                
            </div>
        </div>
    </div>
    
</section>


<section class=" p-3">
    <% if(kavad) { %> 
        <div id="väikeVaade" class="invisibility">
            <% for(kava of kavad) { %>
                    <div id="VäVaade">
                        <div>
                            <%= kava.raskustase %>
                        </div>
                        <div>
                            <%= kava.nimi %>
                        </div>
                    </div>
            <% } %>
        </div>
    <% } %> 
    <div id="suurVaade" class="row row-cols-md-2 row-cols-xl-4 g-3 justify-content-md-center" style="margin:0px 20px">
        <% if(kavad) { %>
            <% for( let kava of kavad) { %>
                <div class="col-12 col-md-6 col-lg-4 ">
                    
                    <div id="card" style="margin: auto;">
                        
                        <div class="cardtop">
                            <div id="level">
                                <span id="number"><%= kava.raskustase %>%</span>
                            </div>
                            <div id="head">
                                <span id="title"><%= kava.nimi %> </span>
                            </div>
                        </div>
                        <div class="cardbottom ">
                            <ol class="harjutused">
                                <div class="row row-cols-1 ">
                                    <% if (kava.harjutused.length !== 0 ) { %>
                                        <% for(harjutus of kava.harjutused) { %>
                                            <% if (harjutus.harj == null) { %>
                                                <% continue; %> 
                                            <% } %>
                                            <% if (harjutus.harj.raskustase === 1) { %>
                                                <div class="col-8">
                                                    <li class="custommargin1"><%= harjutus.harj.nimi %></li>
                                                </div>
                                            <% } else { %>
                                                <div class="col-8">
                                                    <li class="custommargin1 raskus<%=harjutus.harj.raskustase%>"><%= harjutus.harj.nimi %></li>
                                                </div>
                                            <%} %>

                                            <div class="col-4">
                                                <div id="kordused"><%= harjutus.kordused_x %> * <%= harjutus.kordused_y %></div>
                                            </div>
                                        <% } %>
                                    <% } else { %>
                                        <DIV id="TÜHJUS">TÜHI KAVA</DIV>
                                    <%}%>
                                </div>
                            </ol>
                        </div>
                        <div id="cardbuttons" class="">
                            <a id="lisaHar" href="ukekavad/lisaharjutus/<%=kava._id%>">+</a>
                            <a id="uuenda" href="ukekavad/update/<%=kava._id%>">Uuenda</a>
                            <a id="kustuta" href="ukekavad/deleteOne/<%=kava._id%>">Kustuta</a>
                            <form action="/save/<%=kava._id%>"method="POST">
                                <button id="harj-save" type="submit">
                                    <svg width="18" height="25" viewBox="0 0 18 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path id="lips" d="M0 1C0 0.447716 0.447715 0 1 0H8.5H17C17.5523 0 18 0.447715 18 1V19.6552C18 19.8786 17.9252 20.0956 17.7875 20.2715L9.7875 30.4937C9.38713 31.0053 8.61287 31.0053 8.21249 30.4937L0.212495 20.2715C0.0748085 20.0956 0 19.8786 0 19.6552V1Z" fill="white"/>
                                    </svg>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            <% } %>
        <% } %> 
    </div>

</section>
<script>
    const VäVaNupp1 = document.querySelector('#väikevaade')
    const VäVaNupp2 = document.querySelector('#väikevaade2')
    const kaardid = document.querySelector('#suurVaade')
    const väKaardid = document.querySelector('#väikeVaade')
    VäVaNupp1.addEventListener('click', function(){
        kaardid.classList.toggle('invisibility');
        väKaardid.classList.toggle('invisibility');
        VäVaNupp1.classList.toggle('invisibility')
        VäVaNupp2.classList.toggle('invisibility')
    })
    VäVaNupp2.addEventListener('click', function(){
        kaardid.classList.toggle('invisibility');
        väKaardid.classList.toggle('invisibility');
        VäVaNupp1.classList.toggle('invisibility')
        VäVaNupp2.classList.toggle('invisibility')
    })


</script>

