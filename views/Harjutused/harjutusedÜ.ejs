<% layout("layout/boilerplate.ejs") %>
<%- include("../partials/navbar_Ük_harj") %>
<%- include('../partials/flash')  %>

<div class="polygon1h">
    <div class="polygon2h">
        <div class="polygon3h">
        </div>
    </div>
</div>




<h1 id="harj-heading">Üke harjutused</h1>
<div class="harj-switch">
    <a id="ükeharj-btn" href="/harjutused">Üke</a>
    <a id="ujumiseharj-btn" href="/ujumiseharj">Ujumine</a>
</div>

<div id="sidebar-popup">
    <button id="sidebar-tab">
        <svg width="19" height="23" viewBox="0 0 19 23" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18.0607 12.5607C18.6464 11.9749 18.6464 11.0251 18.0607 10.4393L8.51472 0.893398C7.92893 0.307612 6.97918 0.307612 6.3934 0.893398C5.80761 1.47918 5.80761 2.42893 6.3934 3.01472L14.8787 11.5L6.3934 19.9853C5.80761 20.5711 5.80761 21.5208 6.3934 22.1066C6.97918 22.6924 7.92893 22.6924 8.51472 22.1066L18.0607 12.5607ZM0 13H3.83871V10H0V13ZM3.83871 13H7.12903V10H3.83871V13ZM7.12903 13H17V10H7.12903V13Z" fill="white"/>
        </svg>
    </button>
    <div id="sidebar-content">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Nesciunt perferendis natus voluptas inventore odit quaerat optio provident tenetur labore iusto, consequatur nam fugit cum exercitationem voluptatibus laborum fuga delectus omnis.
    </div>



</div>

<div class="containerC">
        <div class="makemenu">
            <form class="form-control p-4 border-add text-dark" action="/harjutused" method="POST">
                <div class="row row-cols-2">
                    <div class="col-12 col-md-6 my-1 ">
                        <label for="nim">Harjutuse nimi</label>
                        <input class="form-control border-add" type="text" id="nim" name="nimi" placeholder="nimi">
                    </div>
                    <div class="col-12 col-lg-6 my-1 ">
                        <label for="hoverting">Lihasgruppid</label>
                        <div id="hoverting" class="hoverthing border-add">
                        </div>
                        <div style="height: 0; position: relative;">
                            <div class="popup none">
                                <form action="/testpage" method="POST">
                                    <div class="row row-cols-2 justify-content-start">
                                        <div class="col">
                                            <% for(lihasgrupp of half1_lg) { %>
                                                <label for="<%=lihasgrupp%>" class="<%=lihasgrupp%>checkbox lab">
                                                    <input type="checkbox"  id="<%=lihasgrupp%>" name="lihasgruppid" value="<%= lihasgrupp %>">
                                                </label>
                                            <% } %>
                                        </div>
                                        <div class="col">
                                            <% for(lihasgrupp of half2_lg) { %>
                                                <label for="<%=lihasgrupp%>" class="<%=lihasgrupp%>checkbox">
                                                    <input type="checkbox"  id="<%=lihasgrupp%>" name="lihasgruppid" value="<%= lihasgrupp %>">
                                                </label>
                                            <% } %>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 my-1 "><label for="raskustase">Vali raskustase</label><input class="border-add form-control" type="number" id="raskustase" name="raskustase" min='1' max="5" value="1"></div>
                    <div class="col-12 col-md-6  my-1 mt-4"><button class="btn btn-success w-100 fs-2 p-0" type="submit">+</button></div>
                </div>
            </form>
        </div>
    <div class="filtermenu border-add mt-3">
        <div class="leftside">
            <h5>Filter</h5>
            <form action="/harjutused" method="POST">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="rl" id="flexRadioDefault1" value=-1>
                    <label class="form-check-label" for="flexRadioDefault1">
                      Raskemad
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="rl" id="flexRadioDefault2" value=1>
                    <label class="form-check-label" for="flexRadioDefault2">
                      Lihtsamad
                    </label>
                </div>
                <input type="text" id="search" placeholder="Otsi" name="otsing">
                <button type="submit">Otsi</button>
            </form>
        </div>
        <div class="rightside">
            <button id="värvid">
                <svg width="30" height="30" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="11" cy="11" r="11" fill="white"/>
                    <circle cx="11" cy="11" r="10" fill="#535FCB"/>
                    <path d="M21 11C21 9.02219 20.4135 7.08879 19.3147 5.4443C18.2159 3.79981 16.6541 2.51808 14.8268 1.7612C12.9996 1.00433 10.9889 0.806295 9.0491 1.19215C7.10929 1.578 5.32746 2.53041 3.92893 3.92893C2.53041 5.32746 1.578 7.10929 1.19215 9.0491C0.806295 10.9889 1.00433 12.9996 1.7612 14.8268C2.51808 16.6541 3.79981 18.2159 5.4443 19.3147C7.08879 20.4135 9.02219 21 11 21L11 11H21Z" fill="#40D73D"/>
                    <path d="M21 11C21 8.34784 19.9464 5.8043 18.0711 3.92893C16.1957 2.05357 13.6522 1 11 1C8.34784 1 5.8043 2.05357 3.92893 3.92893C2.05357 5.80429 1 8.34783 1 11L11 11H21Z" fill="#E93434"/>
                    <path d="M21 11C21 9.68678 20.7413 8.38642 20.2388 7.17317C19.7362 5.95991 18.9997 4.85752 18.0711 3.92893C17.1425 3.00035 16.0401 2.26375 14.8268 1.7612C13.6136 1.25866 12.3132 1 11 1L11 11H21Z" fill="#EFDA1E"/>
                </svg>
            </button>
            <button id="väikevaade" class="invisibility">
                <svg width="30" height="30" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="10" height="10" rx="1" fill="white"/>
                    <rect x="12" width="10" height="10" rx="1" fill="white"/>
                    <rect x="12" y="12" width="10" height="10" rx="1" fill="white"/>
                    <rect y="12" width="10" height="10" rx="1" fill="white"/>
                </svg>
            </button>
            <button id="väikevaade2" >
                <svg width="30" height="30" viewBox="0 0 22 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect y="8" width="22" height="5" rx="1" fill="white"/>
                    <rect width="22" height="5" rx="1" fill="white"/>
                    <rect y="16" width="22" height="5" rx="1" fill="white"/>
                </svg>
            </button>
        </div>
        
    </div>
</div>


<div class="harjutused-harjutused mt-5">
    <div id="harj-grid">
        <% for( let harj of harjutused) { %>
            <div class="card-desc invisibility">
                <div class="card-desc-head">
                    <button>
                        <svg width="20" height="15" viewBox="0 0 23 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M23 9L8 0.339746V17.6603L23 9ZM0 10.5H4.14V7.5H0V10.5ZM4.14 10.5H9.5V7.5H4.14V10.5Z" fill="#212529"/>
                        </svg>
                    </button>
                </div>
                <div id="card-kirjeldus">
                    <p><%=harj.kirjeldus%></p>
                </div>
            </div>
            <div id="harj-card">
                <div id="harj-card-head">
                    <span class="level<%=harj.raskustase%>"><%= harj.raskustase %></span>
                    <span><%=harj.nimi%></span>
                    <button>?</button>
                </div>
                <div id="harj-card-main">
                    <svg class= "<% for(lih of harj.lihasgruppid) {%><%=lih%> <%} %>"    width="144" height="200" viewBox="0 0 144 383" fill="none" xmlns="http://www.w3.org/2000/svg">
                        
                        <path d="M40.5 359L42.5 370.5H57.5L60 357L40.5 359Z" fill="#C4C4C4"/>
                        <path d="M57.5 370.5H42.5L37 381.5L60 380.5L57.5 370.5Z" fill="#C4C4C4"/>
                        <path d="M104.5 370.5H89.5L87 380.5L110 381.5L104.5 370.5Z" fill="#C4C4C4"/>
                        <path d="M106.5 359L87 357L89.5 370.5H104.5L106.5 359Z" fill="#C4C4C4"/>
                        <path d="M3.54478 227.5L23.9032 235L18.8136 213L3.54481 208.5L3.54478 227.5Z" fill="#C4C4C4"/>  <!--käsi-->
                        <path d="M63 281.5L33.287 279.5L38 289.5V345L40.5 359L60 357V346L51.5 316.5L60 296.5L63 281.5Z" fill="#C4C4C4"/>   
                        <path d="M24.2951 141.5L9.5 128L2.24974 143.196L2.03876 150L7.51938 154.75L13 159.5L23.8252 157.5L24.2951 141.5Z" fill="#C4C4C4"/>
                        <path d="M66.5 119L72 128L77 119L72 91.5L66.5 119Z" fill="#C4C4C4"/>
                        <path d="M134.5 128L118.196 141.5L119.587 157.5L129 159.5L134.5 154.75L141.342 150V141.5L134.5 128Z" fill="#C4C4C4"/>
                        <path d="M123.5 213L119.587 235L140.454 227.5L138 208.5L123.5 213Z" fill="#C4C4C4"/> <!--käsi-->
                        <path d="M87 357L106.5 359L107.5 345L109 289.5L110.935 279.5L84 281.5L87 296.5L96 316.5L87.5 346.5L87 357Z" fill="#C4C4C4"/> <!-- shin left -->
                        
                        <path class="reie-eeskülg-s" d="M29.5019 208.5V232.5L33.287 279.5L63 281.5L66.5 229.557V215.057L29.5019 208.5Z" fill="#C4C4C4"/>
                        <path class="reie-eeskülg-s"d="M110.935 279.5L114.497 232.5V208.5L77 215.057V229.557L84 281.5L110.935 279.5Z" fill="#C4C4C4"/>
                        <path id="pea-s"d="M51.8961 50.2767L56 53.5V65.5L66.5 76L72 91.5L77 76L89.5 65.5V53.5L92.6124 50.2767L95 31L93.5 15.5L83.5 1H58.5L50 15.5L49 31L51.8961 50.2767Z" fill="#C4C4C4"/>
                        <path class="säärelihas-s" d="M60 296.5L51.5 316.5L60 346V296.5Z" fill="#C4C4C4"/>
                        <path class="käevars-s" d="M18.8136 213L22.8854 189.5L23.8252 157.5L13 159.5L7.51938 154.75L2.03876 150L1 183.5L3.54481 208.5L18.8136 213Z" fill="#C4C4C4"/>
                        <path class="triitseps-s" d="M1 102L3 119L2.24974 143.196L9.5 128L15 100.25L1 102Z" fill="#C4C4C4"/>
                        <path class="biitseps-s" d="M27.6885 95L29.5019 84.7664L21 99.5L15 100.25L9.5 128L24.2951 141.5L25 117.5L27.6885 95Z" fill="#C4C4C4"/>
                        <path class="deltalihas-s" d="M4.56275 82.5L1 102L15 100.25L21 99.5L29.5019 84.7664L40.5 71.4322L29.5019 69.5L4.56275 82.5Z" fill="#C4C4C4"/>
                        <path class="rinnalihas-s" d="M27.6885 95L31.4736 110L34 119H43.5H51.8961H66.5L72 91.5L66.5 76L40.5 71.4322L29.5019 84.7664L27.6885 95Z" fill="#C4C4C4"/>
                        <path class="kaelalihas-s" d="M56 65.5L29.5019 69.5L40.5 71.4322L66.5 76L56 65.5Z" fill="#C4C4C4"/>
                        <path class="rinnalihas-s" d="M110.935 110L114.497 95V84.5401L103.351 71.4322L77 76L72 91.5L77 119H92.6124H101H109L110.935 110Z" fill="#C4C4C4"/>
                        <path class="kaelalihas-s" d="M114.497 69.5L89.5 65.5L77 76L103.351 71.4322L114.497 69.5Z" fill="#C4C4C4"/>
                        <path class="deltalihas-s" d="M140.454 82.5L114.497 69.5L103.351 71.4322L114.497 84.5401L119.587 99.5L126.611 100.25L142.999 102L140.454 82.5Z" fill="#C4C4C4"/>
                        <path class="biitseps-s" d="M114.497 84.5401V95L117.5 117.5L118.196 141.5L134.5 128L126.611 100.25L119.587 99.5L114.497 84.5401Z" fill="#C4C4C4"/>
                        <path class="triitseps-s" d="M140.454 119L142.999 102L126.611 100.25L134.5 128L141.342 141.5L140.454 119Z" fill="#C4C4C4"/>
                        <path class="käevars-s" d="M138 208.5L141.342 183.5V150L134.5 154.75L129 159.5L119.587 157.5V189.5L123.5 213L138 208.5Z" fill="#C4C4C4"/>
                        <path class="küljelihas-s" d="M33.287 189.5L29.5019 208.5L43.5 191.5V119H34L31.4736 110L33.287 189.5Z" fill="#C4C4C4"/>
                        <path id="kõht-ümber-s" d="M29.5019 208.5L66.5 215.057H77L114.497 208.5L101 191.5V119H92.6124V191.5L77 202.5H71.75H66.5L51.8961 191.5V119H43.5V191.5L29.5019 208.5Z" fill="#C4C4C4"/>
                        <path class="kõhulihas-s" d="M72 128L66.5 119H51.8961V191.5L66.5 202.5H71.75L72 128Z" fill="#C4C4C4"/>
                        <path class="kõhulihas-s" d="M77 119L72 128L71.75 202.5H77L92.6124 191.5V119H77Z" fill="#C4C4C4"/>
                        <path class="küljelihas-s" d="M114.497 208.5L110.935 189.5V110L109 119H101V191.5L114.497 208.5Z" fill="#C4C4C4"/>
                        <path class="säärelihas-s" d="M87 296.5L87.5 346.5L96 316.5L87 296.5Z" fill="#C4C4C4"/>
                        <path d="M56 65.5L29.5019 69.5M56 65.5L66.5 76M56 65.5V53.5L51.8961 50.2767L49 31L50 15.5L58.5 1H83.5L93.5 15.5L95 31L92.6124 50.2767L89.5 53.5V65.5M89.5 65.5L114.497 69.5M89.5 65.5L77 76M114.497 69.5L140.454 82.5L142.999 102M114.497 69.5L103.351 71.4322M142.999 102L140.454 119L141.342 141.5M142.999 102L126.611 100.25M114.497 95L110.935 110M114.497 95V84.5401M114.497 95L117.5 117.5L118.196 141.5M114.497 208.5L77 215.057M114.497 208.5L110.935 189.5V110M114.497 208.5V232.5L110.935 279.5M114.497 208.5L101 191.5V119M29.5019 208.5L66.5 215.057M29.5019 208.5L33.287 189.5L31.4736 110M29.5019 208.5V232.5L33.287 279.5M29.5019 208.5L43.5 191.5V119M27.6885 95L31.4736 110M27.6885 95L29.5019 84.7664M27.6885 95L25 117.5L24.2951 141.5M1 102L4.56275 82.5L29.5019 69.5M1 102L3 119L2.24974 143.196M1 102L15 100.25M29.5019 69.5L40.5 71.4322M33.287 279.5L63 281.5M33.287 279.5L38 289.5V345L40.5 359M63 281.5L60 296.5M63 281.5L66.5 229.557V215.057M66.5 215.057H77M60 357V346M60 357L57.5 370.5M60 357L40.5 359M40.5 359L42.5 370.5M110.935 279.5L84 281.5M110.935 279.5L109 289.5L107.5 345L106.5 359M106.5 359L87 357M106.5 359L104.5 370.5M87 357L87.5 346.5M87 357L89.5 370.5M84 281.5L87 296.5M84 281.5L77 229.557V215.057M77 76L72 91.5M77 76L103.351 71.4322M66.5 76L72 91.5M66.5 76L40.5 71.4322M31.4736 110L34 119H43.5M110.935 110L109 119H101M72 128L66.5 119M72 128L77 119M72 128L71.75 202.5M72 91.5L66.5 119M72 91.5L77 119M18.8136 213L22.8854 189.5L23.8252 157.5M18.8136 213L23.9032 235L3.54478 227.5L3.54481 208.5M18.8136 213L3.54481 208.5M87 296.5L87.5 346.5M87 296.5L96 316.5L87.5 346.5M60 296.5L51.5 316.5L60 346M60 296.5V346M29.5019 84.7664L40.5 71.4322M29.5019 84.7664L21 99.5L15 100.25M114.497 84.5401L103.351 71.4322M114.497 84.5401L119.587 99.5L126.611 100.25M66.5 119H51.8961M77 119H92.6124M15 100.25L9.5 128M9.5 128L24.2951 141.5M9.5 128L2.24974 143.196M24.2951 141.5L23.8252 157.5M126.611 100.25L134.5 128M134.5 128L118.196 141.5M134.5 128L141.342 141.5M118.196 141.5L119.587 157.5M2.24974 143.196L2.03876 150M141.342 141.5V150M2.03876 150L1 183.5L3.54481 208.5M2.03876 150L7.51938 154.75L13 159.5L23.8252 157.5M138 208.5L141.342 183.5V150M138 208.5L123.5 213M138 208.5L140.454 227.5L119.587 235L123.5 213M123.5 213L119.587 189.5V157.5M119.587 157.5L129 159.5L134.5 154.75L141.342 150M42.5 370.5H57.5M42.5 370.5L37 381.5L60 380.5L57.5 370.5M104.5 370.5H89.5M104.5 370.5L110 381.5L87 380.5L89.5 370.5M43.5 119H51.8961M101 119H92.6124M51.8961 119V191.5L66.5 202.5H71.75M92.6124 119V191.5L77 202.5H71.75" stroke="white"/>
                        
                    </svg>
                    <ul>
                        <% for(lih of harj.lihasgruppid) { %>
                            <li><%= lih %> </li>
                        <% } %>
                    </ul>
                </div>
                <div id="harj-card-buttons">
                    <a id="button-uuenda" href="harjutused/update/<%=harj._id%>">
                        <svg width="29" height="29" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0.735745 7.7774C0.331817 7.38932 0.325397 6.74518 0.72151 6.34913L6.35011 0.721401C6.74622 0.325349 7.39036 0.331868 7.77838 0.735855L20.9994 14.5011L14.4989 21.0006L0.735745 7.7774Z" fill="white"/>
                        <path d="M23 23L15.2404 21.3658L21.3646 15.2425L23 23Z" fill="white"/>
                        </svg>
                    </a>
                    <a id="button-kustuta" href="harjutused/deleteOne/<%=harj._id%>">
                        <svg width="26" height="26" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="15.5563" width="4" height="22" rx="1" transform="rotate(45 15.5563 0)" fill="white"/>
                        <rect width="4" height="22" rx="1" transform="matrix(-0.707107 0.707107 0.707107 0.707107 2.82843 0)" fill="white"/>
                        </svg>
                    </a>
                    <a id="button-vaata" href="showcard/<%=harj._id%>/harjutus">
                        <svg id="luup" width="26" height="26" viewBox="0 0 24 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M15.5 17C20.1944 17 24 13.1944 24 8.5C24 3.80557 20.1944 0 15.5 0C10.8056 0 7 3.80557 7 8.5C7 13.1944 10.8056 17 15.5 17ZM15.5 15C19.0898 15 22 12.0898 22 8.5C22 4.91016 19.0898 2 15.5 2C11.9102 2 9 4.91016 9 8.5C9 12.0898 11.9102 15 15.5 15Z" fill="white"/>
                            <path d="M3 23L10 15" stroke="white" stroke-width="3" stroke-linecap="round"/>
                        </svg> 
                    </a>
                    <form action="/save/<%=harj._id%>"method="POST">
                        <button id="button-save" type="submit">
                            <svg width="18" height="25" viewBox="0 0 18 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path id="lips" d="M0 1C0 0.447716 0.447715 0 1 0H8.5H17C17.5523 0 18 0.447715 18 1V19.6552C18 19.8786 17.9252 20.0956 17.7875 20.2715L9.7875 30.4937C9.38713 31.0053 8.61287 31.0053 8.21249 30.4937L0.212495 20.2715C0.0748085 20.0956 0 19.8786 0 19.6552V1Z" fill="white"/>
                            </svg>
                        </button>
                    </form>
                </div>
            </div>
        <% } %>
    </div>
</div>



<script>
    let hoverthing = document.querySelector('.hoverthing');
    let popupthing = document.querySelector('.popup');
    hoverthing.addEventListener('click', function(){
        popupthing.classList.toggle('none');
    })
    popupthing.addEventListener('pointerout', ()=>{
        popupthing.classList.toggle('none');
    })

    const sidebartab = document.querySelector('#sidebar-tab');
    const sidebartabsvg = document.querySelector('#sidebar-tab svg');
    const sidebar = document.querySelector('#sidebar-popup');
    sidebartab.addEventListener('click', function(){
        sidebar.classList.toggle('slidebar');
        sidebartabsvg.classList.toggle('rotate');

    })

    const harjbtns = document.querySelectorAll('#harj-card #harj-card-head button');
    const harjdescbtns = document.querySelectorAll('.card-desc .card-desc-head button');
    const harjdesc = document.querySelectorAll('#harj-grid .card-desc')
    const harjcard = document.querySelectorAll('#harj-card')

    for(let i = 0; i < harjbtns.length; i++){
        harjbtns[i].addEventListener('click', function(){
            harjdesc[i].classList.toggle('invisibility');
            harjcard[i].classList.toggle('invisibility');
        })
        harjdescbtns[i].addEventListener('click', function(){
            harjdesc[i].classList.toggle('invisibility');
            harjcard[i].classList.toggle('invisibility');
        })
    }
    

</script>